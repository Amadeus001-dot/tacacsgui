{"version":3,"sources":["webpack:///./src/app/views/partials/layout/tacgui/_fields/clock/clock.component.html","webpack:///./src/app/views/partials/layout/tacgui/_fields/clock/clock.component.scss","webpack:///./src/app/views/partials/layout/tacgui/_fields/clock/clock.component.ts","webpack:///./src/app/views/partials/layout/tacgui/_fields/clock/clock.module.ts","webpack:///./src/app/views/partials/layout/tacgui/_fields/clock/clock.service.ts","webpack:///./src/app/views/partials/layout/tacgui/_fields/field-general-list/preload.service.ts"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["module.exports = \"<div class=\\\"\\\">\\n  <p>{{_title}} {{ (time | async) }} {{ (timezone) ? _timezone : '' }}</p>\\n</div>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL3BhcnRpYWxzL2xheW91dC90YWNndWkvX2ZpZWxkcy9jbG9jay9jbG9jay5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit, Input } from '@angular/core';\n// RXJS\nimport { BehaviorSubject, Subject, timer } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { ClockService } from './clock.service'\n\n@Component({\n  selector: 'kt-clock',\n  templateUrl: './clock.component.html',\n  styleUrls: ['./clock.component.scss']\n})\nexport class ClockComponent implements OnInit {\n\n  text = 'Server Time'\n  _title = ''\n  _time_init = 1556288780\n  _timezone = 'Etc/UTC'\n  @Input() timezone: boolean\n  @Input() set title(title: string) {\n    this._title = title || '';\n  }\n  @Input() set time_init(time_init: number) {\n    this._time_init = time_init || 1556288780;\n  }\n  time = new BehaviorSubject<any>('')\n  // date = new Date()\n  private destroy$ = new Subject();\n\n  constructor(private cs: ClockService) { }\n\n  ngOnInit() {\n    const source = timer(1000, 1000);\n    this.cs.get().subscribe(data => {\n      // console.log(data)\n      this._time_init = parseInt(data.epoch)\n      this._timezone = data.timezone\n    })\n    source.pipe(takeUntil(this.destroy$)).subscribe(\n      val => {\n        //console.log(val);\n        this._time_init++\n        this.time.next( this.dateString() )\n\n      }\n    );\n  }\n\n  dateString(){\n    let utc = new Date( new Date(this._time_init*1000).toLocaleString(\"en-US\", {timeZone: this._timezone}))\n\n    let month = '' + ('0'+utc.getMonth() + 1).substr(-2)\n    let day = '' + ('0'+utc.getDate()).substr(-2)\n    let year = utc.getFullYear();\n    let hours = '' +  ('0'+utc.getHours()).substr(-2)\n    let minutes = '' + ('0'+utc.getMinutes()).substr(-2)\n    let seconds = '' + ('0'+utc.getSeconds()).substr(-2);\n\n    return [year, month, day].join('-')+' '+[hours, minutes, seconds].join(':');\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next()\n    this.destroy$.complete()\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ClockComponent } from './clock.component';\n\n@NgModule({\n  declarations: [\n    ClockComponent\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    ClockComponent\n  ]\n})\nexport class ClockModule { }\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { map, first } from 'rxjs/operators';\r\n\r\nconst API_URL = 'api/apicheck/time/';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ClockService {\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  get() {\r\n    return this.http.get<any>(API_URL)\r\n      .pipe(\r\n        first(),\r\n        map( (data) => {\r\n          return data\r\n        } )\r\n      )\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\n\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map, first } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PreloadService {\n\n  constructor(private http: HttpClient) { }\n\n  get(url:string, id:number[], extra:any ='') {\n    const params = new HttpParams()\n    .set('id', id.toString()).set(\"extra\", JSON.stringify(extra));\n    //let message = ''\n    return this.http.get<any>('api'+url, { params })\n      .pipe(\n        first(),\n        map( (data) => {\n          return data.results\n        } )\n      )\n  }\n}\n"],"sourceRoot":""}